<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<title>LuaSOAP: SOAP interface to the Lua programming language</title>
    <link rel="stylesheet" href="http://www.keplerproject.org/doc.css" type="text/css"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>

<div id="container">
	
<div id="product">
	<div id="product_logo"><a href="http://www.keplerproject.org">
		<img alt="LuaSOAP logo" src="luasoap.png"/>
	</a></div>
	<div id="product_name"><big><b>LuaSOAP</b></big></div>
	<div id="product_description">SOAP interface for the Lua programming language</div>
</div> <!-- id="product" -->

<div id="main">
	
<div id="navigation">
<h1>LuaSOAP</h1>
	<ul>
		<li><a href="index.html">Home</a>
			<ul>
				<li><a href="index.html#overview">Overview</a></li>
				<li><a href="index.html#status">Status</a></li>
				<li><a href="index.html#download">Download</a></li>
				<li><a href="index.html#history">History</a></li>
				<li><a href="index.html#credits">Credits</a></li>
				<li><a href="index.html#contact">Contact us</a></li>
			</ul>
		</li>
		<li><strong>Manual</strong>
			<ul>
				<li><a href="manual.html#introduction">Introduction</a></li>
				<li><a href="manual.html#installation">Installation</a></li>
				<li><a href="manual.html#soap_elements">SOAP elements</a></li>
				<li><a href="manual.html#basic">Basic support</a> 
					<ul>
						<li><a href="manual.html#encode">encode</a></li>
						<li><a href="manual.html#decode">decode</a></li>
					</ul>
				</li>
				<li><a href="manual.html#client">Client side</a> 
					<ul>
						<li><a href="manual.html#call">call</a></li>
					</ul>
				</li>
				<li><a href="manual.html#references">References</a></li>
			</ul>
		</li>
		<li><a href="examples.html">Examples</a></li>
		<li><a href="license.html">License</a></li>
	</ul>
</div> <!-- id="navigation" -->

<div id="content">


<h2><a name="introduction"></a>Introduction</h2>

<p>LuaSOAP is a <a href="http://www.lua.org">Lua</a> library to ease the use
of <a href="http://www.w3.org/TR/2003/REC-soap12-part0-20030624/">SOAP</a>.
It enables a Lua program to:</p>

<ul>
    <li>Encode and decode SOAP messages without having to deal directly
        with XML code
    </li>
</ul>

<p>LuaSOAP provides a very simple API and an abstraction layer over
XML avoiding manipulation of string representation of data
structures.</p>

<p>LuaSOAP is based on <a href="http://www.keplerproject.org/luaexpat">LuaExpat</a> and on 
<a href="http://www.lua.org">Lua 5.0</a>.
The abstraction layer over HTTP depends on 
<a href="http://www.tecgraf.puc-rio.br/luasocket">LuaSocket 2.0</a>.
</p>

<h2><a name="installation"></a>Installation</h2>

<p>LuaSOAP is a Lua library composed by two files:
<code>soap.lua</code> and <code>http.lua</code>. Both must be
copied to a directory named <code>soap</code> created somewhere in
your <code>LUA_PATH</code>.</p>

<p>LuaSOAP follows the <a href=
"http://www.keplerproject.org/compat">package model</a> for Lua
5.1, therefore this package should be "installed". In other words,
if you are using Lua 5.0, the files <tt>compat-5.1.c</tt> and
<tt>compat-5.1.h</tt> must be used in the compilation and the file
<tt>compat-5.1.lua</tt> must be installed in the <tt>LUA_PATH</tt>.
If you are using Lua 5.1, nothing should be done.</p>


<h2><a name="soap_elements"></a>SOAP elements</h2>

<p>SOAP elements are always represented by Lua tables except
strings. A SOAP element is a table of the form defined by the <a
href="http://www.keplerproject.org/luaexpat/lom.html">Lua Object
Model</a> from the <a href=
"http://www.keplerproject.org/luaexpat">LuaExpat</a> library. The
table has the following characteristics:</p>

<ul>
<li>a special field called <code>tag</code> with the element's
name;</li>

<li>a special optional field called <code>attr</code> with the
element's attributes (see next section);</li>

<li>the element's children are stored at the <em>array-part</em> of
the table. A child could be an ordinary string or SOAP element (a
Lua table following these same rules).</li>
</ul>

<h4>Attributes</h4>

<p>The special field <code>attr</code> is a Lua table that stores
the SOAP element's attributes as pairs
<em>&lt;key&gt;=&lt;value&gt;</em>. To assure an order (if
necessary), the sequence of <em>key</em>s should be placed at the
<em>array-part</em> of the table.</p>

<h2><a name="basic"></a>Basic support</h2>

<p>The file <code>soap.lua</code> implements all basic support for
encoding and decoding SOAP messages. There are two functions:</p>

<ul>
<li style="list-style: none"><a name="encode"></a></li>

<li><b><code>encode (namespace, element_name, entries, headers*)
=&gt; envelope</code></b><br>
 Builds a SOAP document containing a <code>SOAP-Envelope</code>
element. It receives two strings with the namespace (an URI) and
the SOAP-element's name and, as the third argument, a table with
zero or more <a href="#soap_elements">SOAP elements</a>. An
optional fourth argument can be used to generate the SOAP Header
(it must be a <a href="#soap_elements">SOAP element</a> too). The
result is a string containing the SOAP document. <a name=
"decode"></a></li>

<li><b><code>decode (method_response) =&gt; namespace,
element_name, elements</code></b><br>
 Disassembles a SOAP document into Lua objects. It receives a
string containing the SOAP document. The result are the namespace
(string), the SOAP-element's name (string) and a table with the
contents of the SOAP Body. Each element of this table can be a
string or a <a href="#soap_elements">SOAP element</a>.</li>
</ul>


<h2><a name="client"></a>Client side</h2>

<p>The file <code>soap.http.lua</code> implements a simple
stand-alone client based on <a href=
"http://www.tecgraf.puc-rio.br/luasocket">LuaSocket 2.0</a>. The
following function is provided:</p>

<ul>
<li style="list-style: none"><a name="call"></a></li>

<li><b><code>call (url, namespace, element_name, entries,
headers*)</code></b><br>
 It encapsulates the call of <code>encode</code> and
<code>decode</code> over a connection to an HTTP server. The result
is the same as <a href="#decode">decode</a> function: the namespace
(string), the SOAP-element's name (string) and a table with the
contents of the SOAP Body.</li>
</ul>


<h2><a name="references"></a>References</h2>

Here is a list of related documentation: 

<ul>
<li><a href=
"http://www.w3.org/TR/2003/REC-soap12-part0-20030624/">http://www.w3.org/TR/2003/REC-soap12-part0-20030624/</a></li>
</ul>

</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
	<p><small>
	$Id: manual.html,v 1.7 2005/05/24 23:27:29 carregal Exp $
	</small></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->

</body>
</html> 
